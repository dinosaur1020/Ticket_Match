# 個人管理功能更新

## 更新內容

### 1. 頁面重命名
- 將「我的票券」改名為「個人管理」
- 更新位置：導航欄 (Navigation.tsx)

### 2. 新增「我的貼文」標籤頁
在個人管理頁面 (dashboard) 中新增了三個標籤頁：
- **我的票券** - 查看所有擁有的票券
- **我的貼文** - 查看自己發布的所有貼文（新增）
- **我的交易** - 查看所有交易記錄

### 3. 我的貼文功能
顯示內容包括：
- 活動名稱和地點
- 貼文類型（售票/收票/換票）
- 活動日期
- 貼文內容
- 貼文狀態（Active/Completed/Canceled）
- 建立時間

操作功能：
- **查看詳情** - 跳轉到貼文詳細頁面
- **取消貼文** - 取消狀態為 Active 的貼文

### 4. 新增 API 端點
- `GET /api/listings/my` - 獲取當前用戶的所有貼文
- 使用現有的 `PATCH /api/listings/[id]` 來取消貼文

### 5. 修復票券顯示問題
- 修復了 `/api/tickets/my` 端點，現在返回 `event_id` 字段
- 這解決了創建貼文時票券篩選的問題

## 檔案變更清單

### 已修改的檔案
1. `/app/components/Navigation.tsx` - 更新導航欄文字
2. `/app/app/dashboard/page.tsx` - 新增我的貼文標籤頁和取消功能
3. `/app/app/tickets/add/page.tsx` - 更新提示文字
4. `/app/app/api/tickets/my/route.ts` - 修復缺少 event_id 的問題

### 新增的檔案
1. `/app/app/api/listings/my/route.ts` - 獲取用戶貼文的 API

## 使用方式

1. 登入後，點擊導航欄的「個人管理」
2. 在個人管理頁面中，點擊「我的貼文」標籤
3. 查看所有自己發布的貼文
4. 對於狀態為 Active 的貼文，可以點擊「取消貼文」按鈕來取消
5. 點擊「查看詳情」可以查看貼文的完整資訊

## 注意事項

- 只有狀態為 Active 的貼文才能被取消
- 已完成 (Completed) 或已取消 (Canceled) 的貼文無法再次修改
- 取消貼文前會有確認提示

